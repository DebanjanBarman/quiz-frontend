import{b as I,a as S}from"./index-BA41vzv-.js";import{p as q,k as Q,d as s,B as G,N as ee,a2 as Y,a3 as te,z as k,O as ae,W as me,F as oe,r as a,q as fe,s as ge,o as pe,b as P,c as x,j as l,f as Z,i as $,t as R,w as O,u as M,h as _e}from"./index-DvVByYbY.js";import{a as he,M as ye}from"./style-C9UyKuR8.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as U,v as we,w as Ve,x as J,t as Ie,V as C}from"./forwardRefs-De2f303C.js";import{m as Se,V as K,b as $e}from"./VInput-CYM8uH9X.js";import{m as Oe,V as L,a as ke,b as Ee}from"./VSelectionControl-ClCvZmCB.js";import{V as Ne}from"./VContainer-B08sewyi.js";const Pe=q({...Oe({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),xe=Q()({name:"VRadio",props:Pe(),setup(t,u){let{slots:v}=u;return U(()=>{const c=L.filterProps(t);return s(L,G(c,{class:["v-radio",t.class],style:t.style,type:"radio"}),v)}),{}}}),Ge=q({height:{type:[Number,String],default:"auto"},...Se(),...ee(ke(),["multiple"]),trueIcon:{type:Y,default:"$radioOn"},falseIcon:{type:Y,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ae=Q()({name:"VRadioGroup",inheritAttrs:!1,props:Ge(),emits:{"update:modelValue":t=>!0},setup(t,u){let{attrs:v,slots:c}=u;const f=te(),w=k(()=>t.id||`radio-group-${f}`),n=ae(t,"modelValue");return U(()=>{const[i,g]=me(v),p=K.filterProps(t),V=L.filterProps(t),_=c.label?c.label({label:t.label,props:{for:w.value}}):t.label;return s(K,G({class:["v-radio-group",t.class],style:t.style},i,p,{modelValue:n.value,"onUpdate:modelValue":d=>n.value=d,id:w.value}),{...c,default:d=>{let{id:r,messagesId:y,isDisabled:m,isReadonly:b}=d;return s(oe,null,[_&&s($e,{id:r.value},{default:()=>[_]}),s(Ee,G(V,{id:r.value,"aria-describedby":y.value,defaultsTarget:"VRadio",trueIcon:t.trueIcon,falseIcon:t.falseIcon,type:t.type,disabled:m.value,readonly:b.value,"aria-labelledby":_?r.value:void 0,multiple:!1},g,{modelValue:n.value,"onUpdate:modelValue":A=>n.value=A}),c)])}})}),{}}}),Te=q({id:String,text:String,...ee(we({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),Be=Q()({name:"VTooltip",props:Te(),emits:{"update:modelValue":t=>!0},setup(t,u){let{slots:v}=u;const c=ae(t,"modelValue"),{scopeId:f}=Ve(),w=te(),n=k(()=>t.id||`v-tooltip-${w}`),i=a(),g=k(()=>t.location.split(" ").length>1?t.location:t.location+" center"),p=k(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),V=k(()=>t.transition?t.transition:c.value?"scale-transition":"fade-transition"),_=k(()=>G({"aria-describedby":n.value},t.activatorProps));return U(()=>{const d=J.filterProps(t);return s(J,G({ref:i,class:["v-tooltip",t.class],style:t.style,id:n.value},d,{modelValue:c.value,"onUpdate:modelValue":r=>c.value=r,transition:V.value,absolute:!0,location:g.value,origin:p.value,persistent:!0,role:"tooltip",activatorProps:_.value,_disableGlobalStack:!0},f),{activator:v.activator,default:function(){var b;for(var r=arguments.length,y=new Array(r),m=0;m<r;m++)y[m]=arguments[m];return((b=v.default)==null?void 0:b.call(v,...y))??t.text}})}),Ie({},i)}}),Re={key:0,class:"not-eligible"},ze={key:1,class:"container",id:"main-container"},De={class:"top_bar"},Me={class:"score"},Ce={class:"timer"},Le={class:"submission"},qe={class:"main_section"},Qe={class:"left_section"},Ue={class:"right_section"},Fe={class:"options"},We=["id"],je={class:"next-question"},X="preview-only",He={__name:"quiz",setup(t){const u=fe(),v=ge(),c=a(""),f=a(!1);a("# Hello Editor");const w=document.documentElement,n=v.params.id,i=a(""),g=a({}),p=a(0),V=a(0),_=a(0),d=a(0),r=a({}),y=a({}),m=a(0),b=a("next"),A=a("secondary"),T=a(!1),B=a(1),z=a(1);function le(e,o){const h=new Date(parseInt(e)),de=new Date(parseInt(o));let N=Math.abs(de-h);const j=Math.floor(N/(1e3*60*60));N-=j*(1e3*60*60);const H=Math.floor(N/(1e3*60));N-=H*(1e3*60);const ve=Math.floor(N/1e3);return`${j.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`}const E=setInterval(async()=>{B.value+=1e3,c.value=le(B.value,z.value),B.value>=z.value&&await D()},1e3);async function se(){try{const e=await I.get(`${S.listQuestions}/${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});console.log(e.data),g.value=e.data.data,r.value=g.value[d.value],p.value=g.value.length,console.log(p.value)}catch(e){console.log(e),e.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await u.push("/login"))}}async function F(){try{const e=await I.get(`${S.listOptions}/${r.value.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});y.value=e.data.data,console.log(e.data.data)}catch(e){console.log(e),e.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await u.push("/login"))}}async function ne(){try{const e=await I.post(`${S.response}`,{quiz_id:n,question_id:r.value.id,selected_option_id:i.value},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});_.value=e.data.savedScore.incorrect_answers,V.value=e.data.savedScore.score,T.value=!0,e.data.correct_answer===!0?(document.getElementById(i.value).classList.add("correct_answer"),document.getElementById(i.value).classList.remove("incorrect_answer")):(document.getElementById(i.value).classList.remove("correct_answer"),document.getElementById(i.value).classList.add("incorrect_answer"))}catch(e){console.log(e.response.data),e.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await u.push("/login"))}}async function W(){d.value+1===p.value&&(b.value="submit",A.value="green")}async function D(){try{const e=await I.patch(`${S.response}/${n}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});await u.push(`/join/${n}`)}catch(e){console.log(e),e.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await u.push("/login"))}}async function ie(){m.value++,setTimeout(()=>{m.value=0},3e3),m.value>=2&&(await D(),clearInterval(E))}async function re(){d.value+1<p.value?(d.value=d.value+1,r.value=g.value[d.value],await F(),i.value="",await W()):(await D(),clearInterval(E)),T.value=!1}async function ue(){try{const e=await I.get(`${S.response}/eligible/${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});console.log(e.data)}catch(e){clearInterval(E),console.log(e.status),e.status===401?(console.log("NOT LOGGED IN"),localStorage.clear(),await u.push("/login")):e.status===400&&(f.value=!0)}}async function ce(){try{const e=await I.get(`${S.response}/ending_time/${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});B.value=Number(e.data.current_time),z.value=Number(e.data.response[0].end_time)}catch(e){clearInterval(E),console.log(e.status),e.status===401?(console.log("NOT LOGGED IN"),localStorage.clear(),await u.push("/login")):e.status===400&&(f.value=!0)}}return pe(async e=>{await ue(),f.value===!0?clearInterval(E):(await ce(),await se(),await F(),await W())}),(e,o)=>(P(),x("html",null,[f.value?(P(),x("div",Re,o[1]||(o[1]=[l("div",{class:"text"},[l("p",null,"Either This Quiz doesn't exist,"),l("p",null,"Or You're not allowed to participate on it")],-1)]))):Z("",!0),!f.value&&g.value.length>0?(P(),x("div",ze,[l("div",De,[l("div",Me,[$(" Correct Answers: "+R(V.value)+" ",1),o[2]||(o[2]=l("br",null,null,-1)),$(" Wrong Answers: "+R(_.value),1)]),l("div",Ce,[l("div",null,[l("h2",null,R(c.value),1)])]),l("div",Le,[s(C,{variant:"outlined",color:"#ff0000",onMousedown:ie},{default:O(()=>[o[4]||(o[4]=$(" END QUIZ ")),s(Be,{activator:"parent",location:"bottom"},{default:O(()=>o[3]||(o[3]=[$("Click Twice to End the Quiz ")])),_:1})]),_:1})])]),l("div",qe,[l("div",Qe,[s(M(he),{editorId:X,modelValue:r.value.question},null,8,["modelValue"]),s(M(ye),{editorId:X,scrollElement:M(w)},null,8,["scrollElement"])]),l("div",Ue,[l("div",Fe,[s(Ae,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=h=>i.value=h),color:"secondary"},{default:O(()=>[o[5]||(o[5]=l("p",null,"Select One Answer",-1)),s(Ne,{class:"options-container"},{default:O(()=>[(P(!0),x(oe,null,_e(y.value,h=>(P(),x("div",{class:"option-list",key:h.id,id:h.id},[s(xe,{label:h.option_text,value:h.id},null,8,["label","value"])],8,We))),128))]),_:1})]),_:1},8,["modelValue"])]),l("div",je,[s(C,{variant:"flat",color:"green",class:"btn-submit",disabled:i.value===""||T.value,onMousedown:ne},{default:O(()=>o[6]||(o[6]=[$("Answer ")])),_:1},8,["disabled"]),s(C,{variant:"flat",color:A.value,class:"btn-next",disabled:!T.value,onMousedown:re},{default:O(()=>[$(R(b.value),1)]),_:1},8,["color","disabled"])])])])])):Z("",!0)]))}},ot=be(He,[["__scopeId","data-v-2467ff77"]]);export{ot as default};
