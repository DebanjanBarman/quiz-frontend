import{p as E,m as T,k as L,l as B,n as F,d as r,q as D,s as N,r as l,b as U,c as z,j as w,w as d,u,v as V,F as _,i as y,t as $,x as j}from"./index-DvVByYbY.js";import{b as A,a as H}from"./index-BA41vzv-.js";import{V as M}from"./VSnackbar-DUJBTM5Q.js";import{m as O,a as Z,b as q,c as Y,d as G,e as J,f as K,g as Q,u as W,h as X,i as ee,j as ae,k as te,l as se,n as oe,o as le,V as C}from"./forwardRefs-De2f303C.js";import{V as re}from"./VCardTitle-BBBAXpNz.js";import{V as ne}from"./VForm-DKBKQ7Qb.js";import{V as P}from"./VTextField-CW32dwfx.js";import"./VInput-CYM8uH9X.js";const ue=E({color:String,...O(),...Z(),...q(),...Y(),...G(),...J(),...K(),...Q(),...T()},"VSheet"),ie=L()({name:"VSheet",props:ue(),setup(t,b){let{slots:n}=b;const{themeClasses:i}=B(t),{backgroundColorClasses:f,backgroundColorStyles:g}=W(F(t,"color")),{borderClasses:s}=X(t),{dimensionStyles:c}=ee(t),{elevationClasses:v}=ae(t),{locationStyles:m}=te(t),{positionClasses:p}=se(t),{roundedClasses:k}=oe(t);return le(()=>r(t.tag,{class:["v-sheet",i.value,f.value,s.value,v.value,p.value,k.value,t.class],style:[g.value,c.value,m.value,t.style]},n)),{}}}),de={class:"text-center ma-2"},me={style:{"text-align":"center"}},we={__name:"login",setup(t){const b=D();N();let n=l(""),i=l(""),f=l(!1),g=l(!1),s=l(!1),c=l("blue"),v=l("HELLO"),m=l(!1);const p=l(!1),k=()=>{p.value=!p.value};function S(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}function x(a){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(a)}const I=[a=>a?!0:"You must enter your email id.",a=>S(a)?(f.value=!0,!0):"Please enter a valid email."],h=[a=>a.length>=8?!0:"Password must have at least 8 characters.",a=>x(a)?(g.value=!0,!0):"Password must contain Uppercase,Lowercase,Number,Special Character(Only use @$!%*?&)"];async function R(){m.value=!0;const a={email:n.value.toLowerCase(),password:i.value};try{const e=await A.post(H.login,a);v.value="Login Success",c.value="green",e.status===200&&(s.value=!0,m.value=!1,console.log(e.data),localStorage.setItem("email",n.value.toLowerCase()),localStorage.setItem("authorized","true"),localStorage.setItem("name",e.data.data.name),localStorage.setItem("userId",e.data.data.id),localStorage.setItem("auth_token",e.data.token),localStorage.setItem("role",e.data.data.role),setTimeout(async()=>{await b.push("/")},500)),console.log({response:e})}catch(e){console.log("IM HERE"),console.log(e),s.value=!0,v.value="Incorrect Email or Password",c.value="red",m.value=!1,setTimeout(async()=>{console.log(e)},2e3)}}return(a,e)=>(U(),z(_,null,[w("div",de,[r(M,{modelValue:u(s),"onUpdate:modelValue":e[1]||(e[1]=o=>V(s)?s.value=o:s=o),color:u(c)},{actions:d(()=>[r(C,{color:"white",variant:"text",onClick:e[0]||(e[0]=o=>V(s)?s.value=!1:s=!1)},{default:d(()=>e[5]||(e[5]=[y(" Close ")])),_:1})]),default:d(()=>[y($(u(v))+" ",1)]),_:1},8,["modelValue","color"])]),r(ie,{width:"450",height:"600",class:"mx-auto mt-10 pa-10",style:{"border-radius":"1rem"},elevation:"3",rounded:""},{default:d(()=>[w("div",me,[r(re,{class:"mb-5"},{default:d(()=>e[6]||(e[6]=[w("b",null," Sign in ",-1)])),_:1})]),r(ne,{onSubmit:e[4]||(e[4]=j(()=>{},["prevent"]))},{default:d(()=>[r(P,{modelValue:u(n),"onUpdate:modelValue":e[2]||(e[2]=o=>V(n)?n.value=o:n=o),label:"Email",density:"compact",type:"email",variant:"outlined",color:"blue","validate-on":"input",rules:I,class:"mb-5 mt-10"},null,8,["modelValue"]),r(P,{modelValue:u(i),"onUpdate:modelValue":e[3]||(e[3]=o=>V(i)?i.value=o:i=o),label:"Password",density:"compact",variant:"outlined",color:"blue",class:"mb-5","validate-on":"input","append-inner-icon":"mdi-eye",rules:h,type:p.value?"text":"password","onClick:appendInner":k},null,8,["modelValue","type"]),r(C,{type:"submit",block:"true",disabled:!u(f)||!u(g),loading:u(m),onClick:R,rounded:"",class:"mt-7 mb-10",color:"blue"},{default:d(()=>e[7]||(e[7]=[y(" Sign In ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1})],64))}};export{we as default};
