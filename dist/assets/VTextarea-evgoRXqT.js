import{m as be,a as Pe,u as Ie,b as Ae,V as Re,c as _e}from"./filter-H5zZRxq7.js";import{m as De,V as he,a as Me,f as Te,b as Be,c as Ee}from"./VTextField-CW32dwfx.js";import{p as Ne,q as Ue,o as we,r as ge,s as ze,t as Ce}from"./forwardRefs-De2f303C.js";import{u as He,m as Oe,a as Le,V as xe}from"./VInput-CYM8uH9X.js";import{u as Ge,g as Ke,h as $e,i as Ve,j as je}from"./AppBar-DM9jA0lH.js";import{p as ke,N as qe,k as Se,y as We,r as A,J as G,O as ne,z as w,G as R,d as n,F as z,B as I,P as Je,i as Qe,Q as Xe,R as Ye,S as ye,K as Q,U as Ze,A as et,V as tt,o as lt,H as at,W as nt,X as pe,Y as ut,Z as ot,$ as it,a0 as st,a1 as rt}from"./index-DvVByYbY.js";import{V as ct}from"./VChip-SfnXZfh0.js";import{I as vt}from"./VCardTitle-BBBAXpNz.js";function dt(e,F,a){if(F==null)return e;if(Array.isArray(F))throw new Error("Multiple matches is not implemented");return typeof F=="number"&&~F?n(z,null,[n("span",{class:"v-autocomplete__unmask"},[e.substr(0,F)]),n("span",{class:"v-autocomplete__mask"},[e.substr(F,a)]),n("span",{class:"v-autocomplete__unmask"},[e.substr(F+a)])]):e}const ft=ke({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...be({filterKeys:["title"]}),...Pe(),...qe(De({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ne({transition:!1})},"VAutocomplete"),kt=Se()({name:"VAutocomplete",props:ft(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,F){let{slots:a}=F;const{t:H}=We(),c=A(),v=G(!1),p=G(!0),K=G(!1),X=A(),$=A(),j=ne(e,"menu"),d=w({get:()=>j.value,set:t=>{var l;j.value&&!t&&((l=X.value)!=null&&l.Î¨openChildren.size)||(j.value=t)}}),s=G(-1),O=w(()=>{var t;return(t=c.value)==null?void 0:t.color}),q=w(()=>d.value?e.closeText:e.openText),{items:T,transformIn:ue,transformOut:W}=Ge(e),{textColorClasses:oe,textColorStyles:ie}=Ue(O),f=ne(e,"search",""),u=ne(e,"modelValue",[],t=>ue(t===null?[null]:et(t)),t=>{const l=W(t);return e.multiple?l:l[0]??null}),_=w(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),b=He(),{filteredItems:B,getMatches:D}=Ie(e,T,()=>p.value?"":f.value),h=w(()=>e.hideSelected?B.value.filter(t=>!u.value.some(l=>l.value===t.value)):B.value),i=w(()=>!!(e.chips||a.chip)),x=w(()=>i.value||!!a.selection),y=w(()=>u.value.map(t=>t.props.value)),C=w(()=>{var l;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&f.value===((l=h.value[0])==null?void 0:l.title))&&h.value.length>0&&!p.value&&!K.value}),M=w(()=>e.hideNoData&&!h.value.length||e.readonly||(b==null?void 0:b.isReadonly.value)),E=A(),J=Ae(E,c);function P(t){e.openOnClear&&(d.value=!0),f.value=""}function L(){M.value||(d.value=!0)}function Y(t){M.value||(v.value&&(t.preventDefault(),t.stopPropagation()),d.value=!d.value)}function Z(t){var l;Ye(t)&&((l=c.value)==null||l.focus())}function se(t){var o,r,k;if(e.readonly||b!=null&&b.isReadonly.value)return;const l=c.value.selectionStart,m=u.value.length;if((s.value>-1||["Enter","ArrowDown","ArrowUp"].includes(t.key))&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(d.value=!0),["Escape"].includes(t.key)&&(d.value=!1),C.value&&["Enter","Tab"].includes(t.key)&&!u.value.some(g=>{let{value:V}=g;return V===h.value[0].value})&&N(h.value[0]),t.key==="ArrowDown"&&C.value&&((o=E.value)==null||o.focus("next")),["Backspace","Delete"].includes(t.key)){if(!e.multiple&&x.value&&u.value.length>0&&!f.value)return N(u.value[0],!1);if(~s.value){const g=s.value;N(u.value[s.value],!1),s.value=g>=m-1?m-2:g}else t.key==="Backspace"&&!f.value&&(s.value=m-1)}if(e.multiple){if(t.key==="ArrowLeft"){if(s.value<0&&l>0)return;const g=s.value>-1?s.value-1:m-1;u.value[g]?s.value=g:(s.value=-1,c.value.setSelectionRange((r=f.value)==null?void 0:r.length,(k=f.value)==null?void 0:k.length))}if(t.key==="ArrowRight"){if(s.value<0)return;const g=s.value+1;u.value[g]?s.value=g:(s.value=-1,c.value.setSelectionRange(0,0))}}}function re(t){if(ye(c.value,":autofill")||ye(c.value,":-webkit-autofill")){const l=T.value.find(m=>m.title===t.target.value);l&&N(l)}}function ce(){var t;e.eager&&((t=$.value)==null||t.calculateVisibleItems())}function ee(){var t;v.value&&(p.value=!0,(t=c.value)==null||t.focus())}function te(t){v.value=!0,setTimeout(()=>{K.value=!0})}function ve(t){K.value=!1}function Fe(t){(t==null||t===""&&!e.multiple&&!x.value)&&(u.value=[])}const de=G(!1);function N(t){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!t||t.props.disabled))if(e.multiple){const m=u.value.findIndex(r=>e.valueComparator(r.value,t.value)),o=l??!~m;if(~m){const r=o?[...u.value,t]:[...u.value];r.splice(m,1),u.value=r}else o&&(u.value=[...u.value,t]);e.clearOnSelect&&(f.value="")}else{const m=l!==!1;u.value=m?[t]:[],f.value=m&&!x.value?t.title:"",Q(()=>{d.value=!1,p.value=!0})}}return R(v,(t,l)=>{var m;t!==l&&(t?(de.value=!0,f.value=e.multiple||x.value?"":String(((m=u.value.at(-1))==null?void 0:m.props.title)??""),p.value=!0,Q(()=>de.value=!1)):(!e.multiple&&f.value==null&&(u.value=[]),d.value=!1,u.value.some(o=>{let{title:r}=o;return r===f.value})||(f.value=""),s.value=-1))}),R(f,t=>{!v.value||de.value||(t&&(d.value=!0),p.value=!t)}),R(d,()=>{if(!e.hideSelected&&d.value&&u.value.length){const t=h.value.findIndex(l=>u.value.some(m=>l.value===m.value));Ze&&window.requestAnimationFrame(()=>{var l;t>=0&&((l=$.value)==null||l.scrollToIndex(t))})}}),R(()=>e.items,(t,l)=>{d.value||v.value&&!l.length&&t.length&&(d.value=!0)}),we(()=>{const t=!!(!e.hideNoData||h.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),l=u.value.length>0,m=he.filterProps(e);return n(he,I({ref:c},m,{modelValue:f.value,"onUpdate:modelValue":[o=>f.value=o,Fe],focused:v.value,"onUpdate:focused":o=>v.value=o,validationValue:u.externalValue,counterValue:_.value,dirty:l,onChange:re,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":d.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!x.value,"v-autocomplete--selecting-index":s.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:l?void 0:e.placeholder,"onClick:clear":P,"onMousedown:control":L,onKeydown:se}),{...a,default:()=>n(z,null,[n(Ke,I({ref:X,modelValue:d.value,"onUpdate:modelValue":o=>d.value=o,activator:"parent",contentClass:"v-autocomplete__content",disabled:M.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:ce,onAfterLeave:ee},e.menuProps),{default:()=>[t&&n($e,I({ref:E,selected:y.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault(),onKeydown:Z,onFocusin:te,onFocusout:ve,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},J,e.listProps),{default:()=>{var o,r,k;return[(o=a["prepend-item"])==null?void 0:o.call(a),!h.value.length&&!e.hideNoData&&(((r=a["no-data"])==null?void 0:r.call(a))??n(Ve,{title:H(e.noDataText)},null)),n(Re,{ref:$,renderless:!0,items:h.value},{default:g=>{var me;let{item:V,index:U,itemRef:S}=g;const fe=I(V.props,{ref:S,key:U,active:C.value&&U===0?!0:void 0,onClick:()=>N(V,null)});return((me=a.item)==null?void 0:me.call(a,{item:V,index:U,props:fe}))??n(Ve,I(fe,{role:"option"}),{prepend:le=>{let{isSelected:ae}=le;return n(z,null,[e.multiple&&!e.hideSelected?n(_e,{key:V.value,modelValue:ae,ripple:!1,tabindex:"-1"},null):void 0,V.props.prependAvatar&&n(je,{image:V.props.prependAvatar},null),V.props.prependIcon&&n(ge,{icon:V.props.prependIcon},null)])},title:()=>{var le,ae;return p.value?V.title:dt(V.title,(le=D(V))==null?void 0:le.title,((ae=f.value)==null?void 0:ae.length)??0)}})}}),(k=a["append-item"])==null?void 0:k.call(a)]}})]}),u.value.map((o,r)=>{function k(S){S.stopPropagation(),S.preventDefault(),N(o,!1)}const g={"onClick:close":k,onKeydown(S){S.key!=="Enter"&&S.key!==" "||(S.preventDefault(),S.stopPropagation(),k(S))},onMousedown(S){S.preventDefault(),S.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},V=i.value?!!a.chip:!!a.selection,U=V?Je(i.value?a.chip({item:o,index:r,props:g}):a.selection({item:o,index:r})):void 0;if(!(V&&!U))return n("div",{key:o.value,class:["v-autocomplete__selection",r===s.value&&["v-autocomplete__selection--selected",oe.value]],style:r===s.value?ie.value:{}},[i.value?a.chip?n(ze,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>[U]}):n(ct,I({key:"chip",closable:e.closableChips,size:"small",text:o.title,disabled:o.props.disabled},g),null):U??n("span",{class:"v-autocomplete__selection-text"},[o.title,e.multiple&&r<u.value.length-1&&n("span",{class:"v-autocomplete__selection-comma"},[Qe(",")])])])})]),"append-inner":function(){var g;for(var o=arguments.length,r=new Array(o),k=0;k<o;k++)r[k]=arguments[k];return n(z,null,[(g=a["append-inner"])==null?void 0:g.call(a,...r),e.menuIcon?n(ge,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:Y,onClick:Xe,"aria-label":H(q.value),title:H(q.value),tabindex:"-1"},null):void 0])}})}),Ce({isFocused:v,isPristine:p,menu:d,search:f,filteredItems:B,select:N},c)}}),mt=ke({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Oe(),...Me()},"VTextarea"),St=Se()({name:"VTextarea",directives:{Intersect:vt},inheritAttrs:!1,props:mt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,F){let{attrs:a,emit:H,slots:c}=F;const v=ne(e,"modelValue"),{isFocused:p,focus:K,blur:X}=Le(e),$=w(()=>typeof e.counterValue=="function"?e.counterValue(v.value):(v.value||"").toString().length),j=w(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function d(i,x){var y,C;!e.autofocus||!i||(C=(y=x[0].target)==null?void 0:y.focus)==null||C.call(y)}const s=A(),O=A(),q=G(""),T=A(),ue=w(()=>e.persistentPlaceholder||p.value||e.active);function W(){var i;T.value!==document.activeElement&&((i=T.value)==null||i.focus()),p.value||K()}function oe(i){W(),H("click:control",i)}function ie(i){H("mousedown:control",i)}function f(i){i.stopPropagation(),W(),Q(()=>{v.value="",it(e["onClick:clear"],i)})}function u(i){var y;const x=i.target;if(v.value=x.value,(y=e.modelModifiers)!=null&&y.trim){const C=[x.selectionStart,x.selectionEnd];Q(()=>{x.selectionStart=C[0],x.selectionEnd=C[1]})}}const _=A(),b=A(+e.rows),B=w(()=>["plain","underlined"].includes(e.variant));tt(()=>{e.autoGrow||(b.value=+e.rows)});function D(){e.autoGrow&&Q(()=>{if(!_.value||!O.value)return;const i=getComputedStyle(_.value),x=getComputedStyle(O.value.$el),y=parseFloat(i.getPropertyValue("--v-field-padding-top"))+parseFloat(i.getPropertyValue("--v-input-padding-top"))+parseFloat(i.getPropertyValue("--v-field-padding-bottom")),C=_.value.scrollHeight,M=parseFloat(i.lineHeight),E=Math.max(parseFloat(e.rows)*M+y,parseFloat(x.getPropertyValue("--v-input-control-height"))),J=parseFloat(e.maxRows)*M+y||1/0,P=rt(C??0,E,J);b.value=Math.floor((P-y)/M),q.value=st(P)})}lt(D),R(v,D),R(()=>e.rows,D),R(()=>e.maxRows,D),R(()=>e.density,D);let h;return R(_,i=>{i?(h=new ResizeObserver(D),h.observe(_.value)):h==null||h.disconnect()}),at(()=>{h==null||h.disconnect()}),we(()=>{const i=!!(c.counter||e.counter||e.counterValue),x=!!(i||c.details),[y,C]=nt(a),{modelValue:M,...E}=xe.filterProps(e),J=Te(e);return n(xe,I({ref:s,modelValue:v.value,"onUpdate:modelValue":P=>v.value=P,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":B.value},e.class],style:e.style},y,E,{centerAffix:b.value===1&&!B.value,focused:p.value}),{...c,default:P=>{let{id:L,isDisabled:Y,isDirty:Z,isReadonly:se,isValid:re}=P;return n(Be,I({ref:O,style:{"--v-textarea-control-height":q.value},onClick:oe,onMousedown:ie,"onClick:clear":f,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},J,{id:L.value,active:ue.value||Z.value,centerAffix:b.value===1&&!B.value,dirty:Z.value||e.dirty,disabled:Y.value,focused:p.value,error:re.value===!1}),{...c,default:ce=>{let{props:{class:ee,...te}}=ce;return n(z,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),pe(n("textarea",I({ref:T,class:ee,value:v.value,onInput:u,autofocus:e.autofocus,readonly:se.value,disabled:Y.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:W,onBlur:X},te,C),null),[[ut("intersect"),{handler:d},null,{once:!0}]]),e.autoGrow&&pe(n("textarea",{class:[ee,"v-textarea__sizer"],id:`${te.id}-sizer`,"onUpdate:modelValue":ve=>v.value=ve,ref:_,readonly:!0,"aria-hidden":"true"},null),[[ot,v.value]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:x?P=>{var L;return n(z,null,[(L=c.details)==null?void 0:L.call(c,P),i&&n(z,null,[n("span",null,null),n(Ee,{active:e.persistentCounter||p.value,value:$.value,max:j.value,disabled:e.disabled},c.counter)])])}:void 0})}),Ce({},s,O,T)}});export{St as V,kt as a};
