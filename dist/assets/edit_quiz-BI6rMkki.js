import{q as M,s as F,r as s,o as P,a as W,b as z,c as S,d as t,j,w as a,F as k,i as n,u as D,B as H,x as Y,h as J,e as K,t as X}from"./index-DFaQB4TW.js";import{_ as Z,V as q,e as x}from"./AppBar-BlsIPLEh.js";import{b as p,a as c}from"./index-BUGHhKDO.js";import{V as ee}from"./VDialog-7I16u2be.js";import{V as O}from"./VContainer-BKiY6asd.js";import{V as b}from"./VRow-CmtNopeS.js";import{V as i}from"./VCol-BY8alMtX.js";import{V as u}from"./forwardRefs-NMVkxSyT.js";import{V as te}from"./VForm-DCAA8DGj.js";import{V as C}from"./VTextField-T0dUUG24.js";import{V as ae,a as w}from"./VTextarea-COe8WUqh.js";import{V as le}from"./VCardTitle-D_LrLyCz.js";import"./VInput-C4PcMeCu.js";import"./filter--VPLo0fP.js";import"./VSelectionControl-CXhdLfDS.js";import"./VChip-DVI_L7N4.js";const oe={class:"text-center pa-4"},we={__name:"edit_quiz",setup(se){const r=M(),d=F().params.id,N=[!0,!1],f=s(!1),L=["WAITING","LIVE","COMPLETED"],v=s(""),g=s(""),V=s(""),y=s("WAITING"),T=s(!0),I=s(!1),E=s(!1),m=s(!1),h=s({});async function G(){m.value=!0;const o={title:v.value,description:g.value,thumbnail:V.value,status:y.value,visible:T.value,started:I.value,finished:E.value};console.log(o);try{const e=await p.patch(`${c.quizzesURL}/${d}`,o,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});console.log(e.data),f.value=!1,m.value=!1}catch(e){m.value=!1,console.log(e),e.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await r.push("/login"))}}async function R(){try{const o=await p.delete(`${c.quizzesURL}/${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});console.log(o.data),await _()}catch(o){m.value=!1,console.log(o),o.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await r.push("/login"))}}async function U(){try{const e=(await p.get(`${c.quizzesURL}/${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})).data.quiz;v.value=e.title,g.value=e.description,V.value=e.thumbnail,y.value=e.status,T.value=e.visible,I.value=e.started||!1,E.value=e.finished||!1}catch(o){console.log(o),o.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await r.push("/login"))}}async function A(){try{const o=await p.get(`${c.listQuestions}/${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});h.value=o.data.data,console.log(o.data.data)}catch(o){console.log(o),o.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await r.push("/login"))}}async function B(o){try{const e=await p.delete(`${c.questions}/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});await A()}catch(e){m.value=!1,console.log(e),e.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await r.push("/login"))}}async function _(){await r.push("/admin")}async function Q(){const o=`### Example Question 1
What is the formula for the given equation
$$
 \\sum \\limits_{i=1}^{n} i^2
$$

<!--
            NOTE
---------------------------------------
CREATE QUESTION USING MARKDOWN FORMAT.
CHARACTER LIMIT IS SET TO 2000.
TO ADD IMAGES ONLY ADD IMAGE URL.
DO NOT TRY TO UPLOAD FILES, AS I'VE NOT IMPLEMENTED THAT FEATURE.

-->`;try{const $=(await p.post(c.questions,{quiz_id:d,question:o},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})).data.question.id;await r.push(`/admin/${d}/${$}`)}catch(e){m.value=!1,console.log(e),e.status===401&&(console.log("NOT LOGGED IN"),localStorage.clear(),await r.push("/login"))}}return P(async()=>{await U(),await A()}),(o,e)=>{const $=W("router-link");return z(),S(k,null,[t(Z),j("div",oe,[t(ee,{modelValue:f.value,"onUpdate:modelValue":e[8]||(e[8]=l=>f.value=l),"max-width":"400",persistent:""},{activator:a(({props:l})=>[t(O,null,{default:a(()=>[t(b,{class:"mx-4 my-3",style:{border:"1px solid #fdf","border-radius":"1rem"}},{default:a(()=>[t(i,{cols:"3"},{default:a(()=>[t(u,{style:{float:"left"},"prepend-icon":"mdi-arrow-left",variant:"outlined",color:"purple",onClick:_},{default:a(()=>e[9]||(e[9]=[n(" Back ")])),_:1})]),_:1}),t(i,{cols:"3"},{default:a(()=>[t($,{to:`/admin/${D(d)}/join-requests`},{default:a(()=>[t(u,{style:{float:"left"},variant:"outlined",color:"purple"},{default:a(()=>e[10]||(e[10]=[n(" Pending Join Requests ")])),_:1})]),_:1},8,["to"])]),_:1}),t(i,{cols:"3"},{default:a(()=>[t(u,H({variant:"outlined",color:"purple"},l,{"prepend-icon":"mdi-floppy"}),{default:a(()=>e[11]||(e[11]=[n(" Edit Quiz ")])),_:2},1040)]),_:2},1024),t(i,{cols:"3"},{default:a(()=>[t(u,{variant:"outlined",color:"red","prepend-icon":"mdi-trash-can-outline",onClick:R,style:{float:"right"}},{default:a(()=>e[12]||(e[12]=[n(" Delete Quiz ")])),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),default:a(()=>[t(O,null,{default:a(()=>[t(b,null,{default:a(()=>[t(i,null,{default:a(()=>[t(q,{class:"pa-8"},{default:a(()=>[t(i,{style:{"max-width":"500px",margin:"auto"},cols:"12"},{default:a(()=>[t(te,{onSubmit:Y(G,["prevent"])},{default:a(()=>[t(C,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=l=>v.value=l),variant:"outlined",density:"compact",label:"Name of the Quiz"},null,8,["modelValue"]),t(ae,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l),variant:"outlined",density:"compact",label:"Description of the Quiz"},null,8,["modelValue"]),t(C,{modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=l=>V.value=l),variant:"outlined",density:"compact",label:"Thumbnail image link"},null,8,["modelValue"]),t(w,{items:N,modelValue:T.value,"onUpdate:modelValue":e[3]||(e[3]=l=>T.value=l),variant:"outlined",density:"compact",label:"Visible"},null,8,["modelValue"]),t(w,{items:L,modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=l=>y.value=l),variant:"outlined",density:"compact",label:"Status of the game"},null,8,["modelValue"]),t(w,{modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=l=>I.value=l),items:N,variant:"outlined",density:"compact",label:"Is the quiz started"},null,8,["modelValue"]),t(w,{modelValue:E.value,"onUpdate:modelValue":e[6]||(e[6]=l=>E.value=l),items:N,label:"Is the quiz finished",density:"compact",variant:"outlined"},null,8,["modelValue"]),t(x,null,{default:a(()=>[t(u,{onClick:e[7]||(e[7]=l=>f.value=!1),variant:"outlined",color:"warning"},{default:a(()=>e[13]||(e[13]=[n("Cancel")])),_:1}),t(u,{loading:m.value,type:"submit",variant:"outlined",color:"success"},{default:a(()=>e[14]||(e[14]=[n("Save")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(O,{class:"pa-4",style:{border:"1px solid #fdf","border-radius":"1rem",width:"85%"}},{default:a(()=>[t(b,{class:"mb-6"},{default:a(()=>[t(i,null,{default:a(()=>[t(u,{density:"compact",variant:"outlined",color:"purple","prepend-icon":"mdi-plus",style:{"margin-left":"50%",transform:"translateX(-50%)"},onClick:Q},{default:a(()=>e[15]||(e[15]=[n(" Add Question ")])),_:1})]),_:1})]),_:1}),(z(!0),S(k,null,J(h.value,l=>(z(),K(q,{density:"compact",variant:"outlined",color:"purple",key:l.id,class:"ma-4"},{default:a(()=>[t(b,null,{default:a(()=>[t(i,{cols:"9"},{default:a(()=>[t(le,null,{default:a(()=>[n(X(l.question),1)]),_:2},1024)]),_:2},1024),t(i,{cols:"3"},{default:a(()=>[t(x,null,{default:a(()=>[t($,{to:`/admin/${D(d)}/${l.id}`,style:{"text-decoration":"none",color:"purple"}},{default:a(()=>[t(u,{variant:"outlined",density:"compact","prepend-icon":"mdi-pencil-outline"},{default:a(()=>e[16]||(e[16]=[n(" Edit ")])),_:1})]),_:2},1032,["to"]),t(u,{variant:"outlined",density:"compact",color:"red","prepend-icon":"mdi-trash-can-outline",onClick:ie=>B(l.id)},{default:a(()=>e[17]||(e[17]=[n("Delete ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)}}};export{we as default};
