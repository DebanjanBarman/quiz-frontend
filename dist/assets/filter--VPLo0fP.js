import{m as Ce,V as ve}from"./VTextField-T0dUUG24.js";import{p as U,a2 as pe,k as te,O as ee,z as T,N as ke,d as h,B as L,G as H,F as W,ae as Fe,J as _,V as se,r as E,a7 as be,a1 as ue,as as Te,K as we,U as ie,ai as Ae,n as Re,a5 as Me,a0 as Z,o as Oe,y as Be,P as De,i as Le,A as ce,R as me,S as he,u as q,aq as _e}from"./index-DFaQB4TW.js";import{u as Ee}from"./VInput-C4PcMeCu.js";import{o as le,a as Se,E as Ie,b as Ke,i as He,I as Ue,p as Ne,r as ge,s as ze,t as je}from"./forwardRefs-NMVkxSyT.js";import{m as $e,k as qe,u as We,g as Ge,h as Je,i as ye,j as Qe}from"./AppBar-BlsIPLEh.js";import{m as Xe,V as Ve}from"./VSelectionControl-CXhdLfDS.js";import{V as Ye}from"./VChip-DVI_L7N4.js";const Ze=U({indeterminate:Boolean,indeterminateIcon:{type:pe,default:"$checkboxIndeterminate"},...Xe({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),et=te()({name:"VCheckboxBtn",props:Ze(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,s){let{slots:l}=s;const o=ee(e,"indeterminate"),u=ee(e,"modelValue");function d(n){o.value&&(o.value=!1)}const v=T(()=>o.value?e.indeterminateIcon:e.falseIcon),r=T(()=>o.value?e.indeterminateIcon:e.trueIcon);return le(()=>{const n=ke(Ve.filterProps(e),["modelValue"]);return h(Ve,L(n,{modelValue:u.value,"onUpdate:modelValue":[f=>u.value=f,d],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:v.value,trueIcon:r.value,"aria-checked":o.value?"mixed":void 0}),l)}),{}}}),tt=U({renderless:Boolean,...Se()},"VVirtualScrollItem"),lt=te()({name:"VVirtualScrollItem",inheritAttrs:!1,props:tt(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:l,emit:o,slots:u}=s;const{resizeRef:d,contentRect:v}=Ie(void 0,"border");H(()=>{var r;return(r=v.value)==null?void 0:r.height},r=>{r!=null&&o("update:height",r)}),le(()=>{var r,n;return e.renderless?h(W,null,[(r=u.default)==null?void 0:r.call(u,{itemRef:d})]):h("div",L({ref:d,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(n=u.default)==null?void 0:n.call(u)])})}}),nt=-1,at=1,re=100,ot=U({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function ut(e,s){const l=Fe(),o=_(0);se(()=>{o.value=parseFloat(e.itemHeight||0)});const u=_(0),d=_(Math.ceil((parseInt(e.height)||l.height.value)/(o.value||16))||1),v=_(0),r=_(0),n=E(),f=E();let I=0;const{resizeRef:P,contentRect:i}=Ie();se(()=>{P.value=n.value});const m=T(()=>{var t;return n.value===document.documentElement?l.height.value:((t=i.value)==null?void 0:t.height)||parseInt(e.height)||0}),w=T(()=>!!(n.value&&f.value&&m.value&&o.value));let p=Array.from({length:s.value.length}),y=Array.from({length:s.value.length});const V=_(0);let b=-1;function A(t){return p[t]||o.value}const R=Te(()=>{const t=performance.now();y[0]=0;const a=s.value.length;for(let g=1;g<=a-1;g++)y[g]=(y[g-1]||0)+A(g-1);V.value=Math.max(V.value,performance.now()-t)},V),G=H(w,t=>{t&&(G(),I=f.value.offsetTop,R.immediate(),B(),~b&&we(()=>{ie&&window.requestAnimationFrame(()=>{Y(b),b=-1})}))});be(()=>{R.clear()});function ne(t,a){const g=p[t],k=o.value;o.value=k?Math.min(o.value,a):a,(g!==a||k!==o.value)&&(p[t]=a,R())}function C(t){return t=ue(t,0,s.value.length-1),y[t]||0}function J(t){return rt(y,t)}let N=0,K=0,$=0;H(m,(t,a)=>{a&&(B(),t<a&&requestAnimationFrame(()=>{K=0,B()}))});function Q(){if(!n.value||!f.value)return;const t=n.value.scrollTop,a=performance.now();a-$>500?(K=Math.sign(t-N),I=f.value.offsetTop):K=t-N,N=t,$=a,B()}function z(){!n.value||!f.value||(K=0,$=0,B())}let X=-1;function B(){cancelAnimationFrame(X),X=requestAnimationFrame(ae)}function ae(){if(!n.value||!m.value)return;const t=N-I,a=Math.sign(K),g=Math.max(0,t-re),k=ue(J(g),0,s.value.length),M=t+m.value+re,c=ue(J(M)+1,k+1,s.value.length);if((a!==nt||k<u.value)&&(a!==at||c>d.value)){const S=C(u.value)-C(k),x=C(c)-C(d.value);Math.max(S,x)>re?(u.value=k,d.value=c):(k<=0&&(u.value=k),c>=s.value.length&&(d.value=c))}v.value=C(u.value),r.value=C(s.value.length)-C(d.value)}function Y(t){const a=C(t);!n.value||t&&!a?b=t:n.value.scrollTop=a}const oe=T(()=>s.value.slice(u.value,d.value).map((t,a)=>({raw:t,index:a+u.value})));return H(s,()=>{p=Array.from({length:s.value.length}),y=Array.from({length:s.value.length}),R.immediate(),B()},{deep:!0}),{calculateVisibleItems:B,containerRef:n,markerRef:f,computedItems:oe,paddingTop:v,paddingBottom:r,scrollToIndex:Y,handleScroll:Q,handleScrollend:z,handleItemResize:ne}}function rt(e,s){let l=e.length-1,o=0,u=0,d=null,v=-1;if(e[l]<s)return l;for(;o<=l;)if(u=o+l>>1,d=e[u],d>s)l=u-1;else if(d<s)v=u,o=u+1;else return d===s?u:o;return v}const st=U({items:{type:Array,default:()=>[]},renderless:Boolean,...ot(),...Se(),...Ke()},"VVirtualScroll"),it=te()({name:"VVirtualScroll",props:st(),setup(e,s){let{slots:l}=s;const o=Ae("VVirtualScroll"),{dimensionStyles:u}=He(e),{calculateVisibleItems:d,containerRef:v,markerRef:r,handleScroll:n,handleScrollend:f,handleItemResize:I,scrollToIndex:P,paddingTop:i,paddingBottom:m,computedItems:w}=ut(e,Re(e,"items"));return Me(()=>e.renderless,()=>{function p(){var b,A;const V=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[V]("scroll",n,{passive:!0}),document[V]("scrollend",f)):((b=v.value)==null||b[V]("scroll",n,{passive:!0}),(A=v.value)==null||A[V]("scrollend",f))}Oe(()=>{v.value=Ue(o.vnode.el,!0),p(!0)}),be(p)}),le(()=>{const p=w.value.map(y=>h(lt,{key:y.index,renderless:e.renderless,"onUpdate:height":V=>I(y.index,V)},{default:V=>{var b;return(b=l.default)==null?void 0:b.call(l,{item:y.raw,index:y.index,...V})}}));return e.renderless?h(W,null,[h("div",{ref:r,class:"v-virtual-scroll__spacer",style:{paddingTop:Z(i.value)}},null),p,h("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Z(m.value)}},null)]):h("div",{ref:v,class:["v-virtual-scroll",e.class],onScrollPassive:n,onScrollend:f,style:[u.value,e.style]},[h("div",{ref:r,class:"v-virtual-scroll__container",style:{paddingTop:Z(i.value),paddingBottom:Z(m.value)}},[p])])}),{calculateVisibleItems:d,scrollToIndex:P}}});function ct(e,s){const l=_(!1);let o;function u(r){cancelAnimationFrame(o),l.value=!0,o=requestAnimationFrame(()=>{o=requestAnimationFrame(()=>{l.value=!1})})}async function d(){await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>{if(l.value){const n=H(l,()=>{n(),r()})}else r()})}async function v(r){var I,P;if(r.key==="Tab"&&((I=s.value)==null||I.focus()),!["PageDown","PageUp","Home","End"].includes(r.key))return;const n=(P=e.value)==null?void 0:P.$el;if(!n)return;(r.key==="Home"||r.key==="End")&&n.scrollTo({top:r.key==="Home"?0:n.scrollHeight,behavior:"smooth"}),await d();const f=n.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(r.key==="PageDown"||r.key==="Home"){const i=n.getBoundingClientRect().top;for(const m of f)if(m.getBoundingClientRect().top>=i){m.focus();break}}else{const i=n.getBoundingClientRect().bottom;for(const m of[...f].reverse())if(m.getBoundingClientRect().bottom<=i){m.focus();break}}}return{onScrollPassive:u,onKeydown:v}}const dt=U({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:pe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...$e({itemChildren:!1})},"Select"),ft=U({...dt(),...ke(Ce({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ne({transition:{component:qe}})},"VSelect"),wt=te()({name:"VSelect",props:ft(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:o}=Be(),u=E(),d=E(),v=E(),r=ee(e,"menu"),n=T({get:()=>r.value,set:t=>{var a;r.value&&!t&&((a=d.value)!=null&&a.Î¨openChildren.size)||(r.value=t)}}),{items:f,transformIn:I,transformOut:P}=We(e),i=ee(e,"modelValue",[],t=>I(t===null?[null]:ce(t)),t=>{const a=P(t);return e.multiple?a:a[0]??null}),m=T(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:i.value.length),w=Ee(),p=T(()=>i.value.map(t=>t.value)),y=_(!1),V=T(()=>n.value?e.closeText:e.openText);let b="",A;const R=T(()=>e.hideSelected?f.value.filter(t=>!i.value.some(a=>e.valueComparator(a,t))):f.value),G=T(()=>e.hideNoData&&!R.value.length||e.readonly||(w==null?void 0:w.isReadonly.value)),ne=T(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),C=E(),J=ct(C,u);function N(t){e.openOnClear&&(n.value=!0)}function K(){G.value||(n.value=!n.value)}function $(t){me(t)&&Q(t)}function Q(t){var M,c;if(!t.key||e.readonly||w!=null&&w.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(n.value=!0),["Escape","Tab"].includes(t.key)&&(n.value=!1),t.key==="Home"?(M=C.value)==null||M.focus("first"):t.key==="End"&&((c=C.value)==null||c.focus("last"));const a=1e3;if(e.multiple||!me(t))return;const g=performance.now();g-A>a&&(b=""),b+=t.key.toLowerCase(),A=g;const k=f.value.find(S=>S.title.toLowerCase().startsWith(b));if(k!==void 0){i.value=[k];const S=R.value.indexOf(k);ie&&window.requestAnimationFrame(()=>{var x;S>=0&&((x=v.value)==null||x.scrollToIndex(S))})}}function z(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const g=i.value.findIndex(M=>e.valueComparator(M.value,t.value)),k=a??!~g;if(~g){const M=k?[...i.value,t]:[...i.value];M.splice(g,1),i.value=M}else k&&(i.value=[...i.value,t])}else{const g=a!==!1;i.value=g?[t]:[],we(()=>{n.value=!1})}}function X(t){var a;(a=C.value)!=null&&a.$el.contains(t.relatedTarget)||(n.value=!1)}function B(){var t;e.eager&&((t=v.value)==null||t.calculateVisibleItems())}function ae(){var t;y.value&&((t=u.value)==null||t.focus())}function Y(t){y.value=!0}function oe(t){if(t==null)i.value=[];else if(he(u.value,":autofill")||he(u.value,":-webkit-autofill")){const a=f.value.find(g=>g.title===t);a&&z(a)}else u.value&&(u.value.value="")}return H(n,()=>{if(!e.hideSelected&&n.value&&i.value.length){const t=R.value.findIndex(a=>i.value.some(g=>e.valueComparator(g.value,a.value)));ie&&window.requestAnimationFrame(()=>{var a;t>=0&&((a=v.value)==null||a.scrollToIndex(t))})}}),H(()=>e.items,(t,a)=>{n.value||y.value&&!a.length&&t.length&&(n.value=!0)}),le(()=>{const t=!!(e.chips||l.chip),a=!!(!e.hideNoData||R.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),g=i.value.length>0,k=ve.filterProps(e),M=g||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return h(ve,L({ref:u},k,{modelValue:i.value.map(c=>c.props.value).join(", "),"onUpdate:modelValue":oe,focused:y.value,"onUpdate:focused":c=>y.value=c,validationValue:i.externalValue,counterValue:m.value,dirty:g,class:["v-select",{"v-select--active-menu":n.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:M,"onClick:clear":N,"onMousedown:control":K,onBlur:X,onKeydown:Q,"aria-label":o(V.value),title:o(V.value)}),{...l,default:()=>h(W,null,[h(Ge,L({ref:d,modelValue:n.value,"onUpdate:modelValue":c=>n.value=c,activator:"parent",contentClass:"v-select__content",disabled:G.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:B,onAfterLeave:ae},ne.value),{default:()=>[a&&h(Je,L({ref:C,selected:p.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:c=>c.preventDefault(),onKeydown:$,onFocusin:Y,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},J,e.listProps),{default:()=>{var c,S,x;return[(c=l["prepend-item"])==null?void 0:c.call(l),!R.value.length&&!e.hideNoData&&(((S=l["no-data"])==null?void 0:S.call(l))??h(ye,{title:o(e.noDataText)},null)),h(it,{ref:v,renderless:!0,items:R.value},{default:D=>{var fe;let{item:O,index:j,itemRef:F}=D;const de=L(O.props,{ref:F,key:j,onClick:()=>z(O,null)});return((fe=l.item)==null?void 0:fe.call(l,{item:O,index:j,props:de}))??h(ye,L(de,{role:"option"}),{prepend:xe=>{let{isSelected:Pe}=xe;return h(W,null,[e.multiple&&!e.hideSelected?h(et,{key:O.value,modelValue:Pe,ripple:!1,tabindex:"-1"},null):void 0,O.props.prependAvatar&&h(Qe,{image:O.props.prependAvatar},null),O.props.prependIcon&&h(ge,{icon:O.props.prependIcon},null)])}})}}),(x=l["append-item"])==null?void 0:x.call(l)]}})]}),i.value.map((c,S)=>{function x(F){F.stopPropagation(),F.preventDefault(),z(c,!1)}const D={"onClick:close":x,onKeydown(F){F.key!=="Enter"&&F.key!==" "||(F.preventDefault(),F.stopPropagation(),x(F))},onMousedown(F){F.preventDefault(),F.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},O=t?!!l.chip:!!l.selection,j=O?De(t?l.chip({item:c,index:S,props:D}):l.selection({item:c,index:S})):void 0;if(!(O&&!j))return h("div",{key:c.value,class:"v-select__selection"},[t?l.chip?h(ze,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:c.title}}},{default:()=>[j]}):h(Ye,L({key:"chip",closable:e.closableChips,size:"small",text:c.title,disabled:c.props.disabled},D),null):j??h("span",{class:"v-select__selection-text"},[c.title,e.multiple&&S<i.value.length-1&&h("span",{class:"v-select__selection-comma"},[Le(",")])])])})]),"append-inner":function(){var D;for(var c=arguments.length,S=new Array(c),x=0;x<c;x++)S[x]=arguments[x];return h(W,null,[(D=l["append-inner"])==null?void 0:D.call(l,...S),e.menuIcon?h(ge,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),je({isFocused:y,menu:n,select:z},u)}}),vt=(e,s,l)=>e==null||s==null?-1:e.toString().toLocaleLowerCase().indexOf(s.toString().toLocaleLowerCase()),St=U({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function mt(e,s,l){var r;const o=[],u=(l==null?void 0:l.default)??vt,d=l!=null&&l.filterKeys?ce(l.filterKeys):!1,v=Object.keys((l==null?void 0:l.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return o;e:for(let n=0;n<e.length;n++){const[f,I=f]=ce(e[n]),P={},i={};let m=-1;if((s||v>0)&&!(l!=null&&l.noFilter)){if(typeof f=="object"){const y=d||Object.keys(I);for(const V of y){const b=_e(I,V),A=(r=l==null?void 0:l.customKeyFilter)==null?void 0:r[V];if(m=A?A(b,s,f):u(b,s,f),m!==-1&&m!==!1)A?P[V]=m:i[V]=m;else if((l==null?void 0:l.filterMode)==="every")continue e}}else m=u(f,s,f),m!==-1&&m!==!1&&(i.title=m);const w=Object.keys(i).length,p=Object.keys(P).length;if(!w&&!p||(l==null?void 0:l.filterMode)==="union"&&p!==v&&!w||(l==null?void 0:l.filterMode)==="intersection"&&(p!==v||!w))continue}o.push({index:n,matches:{...i,...P}})}return o}function It(e,s,l,o){const u=E([]),d=E(new Map),v=T(()=>o!=null&&o.transform?q(s).map(n=>[n,o.transform(n)]):q(s));se(()=>{const n=typeof l=="function"?l():q(l),f=typeof n!="string"&&typeof n!="number"?"":String(n),I=mt(v.value,f,{customKeyFilter:{...e.customKeyFilter,...q(o==null?void 0:o.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),P=q(s),i=[],m=new Map;I.forEach(w=>{let{index:p,matches:y}=w;const V=P[p];i.push(V),m.set(V.value,y)}),u.value=i,d.value=m});function r(n){return d.value.get(n.value)}return{filteredItems:u,filteredMatches:d,getMatches:r}}export{it as V,dt as a,ct as b,et as c,wt as d,St as m,It as u};
